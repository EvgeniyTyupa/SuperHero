{"ast":null,"code":"import { heroApi } from '../api/api';\nconst SET_HEROES = \"SET_HEROES\";\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\nconst SET_TOTAL_HEROES_COUNT = \"SET_TOTAL_HEROES_COUNT\";\nconst TOOGLE_IS_FETCHING = \"TOOGLE_IS_FETCHING\";\nconst TAKE_HERO = \"TAKE_HERO\";\nconst DELETE_HERO = \"DELETE_HERO\";\nconst SET_CURRENT_DOING = \"SET_CURRENT_DOING\";\nconst SAVE_PHOTO_SUCCESS = \"SET_PHOTO_SUCCESS\";\nconst ADD_HERO = \"ADD_HERO\";\nlet initialState = {\n  heroes: [],\n  pageSize: 5,\n  totalHeroesCount: 0,\n  currentPage: 1,\n  isFetching: true,\n  currentHero: 1,\n  currentDoing: \"\"\n};\n\nconst heroesReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_HEROES:\n      {\n        return { ...state,\n          heroes: action.heroes\n        };\n      }\n\n    case SET_TOTAL_HEROES_COUNT:\n      {\n        return { ...state,\n          totalHeroesCount: action.totalHeroesCount\n        };\n      }\n\n    case TOOGLE_IS_FETCHING:\n      {\n        return { ...state,\n          isFetching: action.isFetching\n        };\n      }\n\n    case TAKE_HERO:\n      {\n        return { ...state,\n          currentHero: action.currentHero\n        };\n      }\n\n    case SET_CURRENT_PAGE:\n      {\n        return { ...state,\n          currentPage: action.currentPage\n        };\n      }\n\n    case DELETE_HERO:\n      {\n        return { ...state,\n          heroes: state.heroes.map(h => {\n            if (h.id === action.heroId) {\n              return h.id;\n            }\n          })\n        };\n      }\n\n    case SET_CURRENT_DOING:\n      {\n        return { ...state,\n          currentDoing: action.currentDoing\n        };\n      }\n\n    case SAVE_PHOTO_SUCCESS:\n      {\n        return { ...state,\n          heroes: action.heroes\n        };\n      }\n\n    case ADD_HERO:\n      {\n        return { ...state,\n          heroes: action.heroes\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport const setHeroes = heroes => ({\n  type: SET_HEROES,\n  heroes\n});\nexport const setCurrentPage = currentPage => ({\n  type: SET_CURRENT_PAGE,\n  currentPage\n});\nexport const setTotalHeroesCount = totalHeroesCount => ({\n  type: SET_TOTAL_HEROES_COUNT,\n  totalHeroesCount\n});\nexport const setIsFetching = isFetching => ({\n  type: TOOGLE_IS_FETCHING,\n  isFetching\n});\nexport const setCurrentHero = currentHero => ({\n  type: TAKE_HERO,\n  currentHero\n});\nexport const deleteHero = heroId => {\n  heroApi.deleteHero(heroId);\n};\nexport const savePhotoSucces = heroes => ({\n  type: SAVE_PHOTO_SUCCESS,\n  heroes\n});\nexport const setCurrentDoing = currentDoing => ({\n  type: SET_CURRENT_DOING,\n  currentDoing\n});\nexport const savePhoto = file => async dispatch => {\n  let response = await heroApi.savePhoto(file);\n  dispatch(savePhotoSucces(response.heroes));\n};\nexport const addHeroSucces = heroes => ({\n  type: ADD_HERO,\n  heroes\n});\nexport const addHeroes = hero => {\n  heroApi.addHero(hero);\n};\nexport const getHeroesThunkCreator = (currentPage, pageSize) => {\n  return dispatch => {\n    dispatch(setIsFetching(true));\n    heroApi.getHeroes(currentPage, pageSize).then(data => {\n      dispatch(setIsFetching(false));\n      dispatch(setHeroes(data.heroes));\n      dispatch(setTotalHeroesCount(data.totalHeroesCount));\n      dispatch(setCurrentHero(data.heroes[1]));\n    });\n  };\n};\nexport default heroesReducer;","map":{"version":3,"sources":["D:/www/apache/Apache24/htdocs/superheroes/superheroes/src/redux/heroesReducer.js"],"names":["heroApi","SET_HEROES","SET_CURRENT_PAGE","SET_TOTAL_HEROES_COUNT","TOOGLE_IS_FETCHING","TAKE_HERO","DELETE_HERO","SET_CURRENT_DOING","SAVE_PHOTO_SUCCESS","ADD_HERO","initialState","heroes","pageSize","totalHeroesCount","currentPage","isFetching","currentHero","currentDoing","heroesReducer","state","action","type","map","h","id","heroId","setHeroes","setCurrentPage","setTotalHeroesCount","setIsFetching","setCurrentHero","deleteHero","savePhotoSucces","setCurrentDoing","savePhoto","file","dispatch","response","addHeroSucces","addHeroes","hero","addHero","getHeroesThunkCreator","getHeroes","then","data"],"mappings":"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","sourcesContent":["import {heroApi} from '../api/api';\r\n\r\nconst SET_HEROES = \"SET_HEROES\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_TOTAL_HEROES_COUNT = \"SET_TOTAL_HEROES_COUNT\";\r\nconst TOOGLE_IS_FETCHING = \"TOOGLE_IS_FETCHING\";\r\nconst TAKE_HERO = \"TAKE_HERO\";\r\nconst DELETE_HERO = \"DELETE_HERO\";\r\nconst SET_CURRENT_DOING = \"SET_CURRENT_DOING\";\r\nconst SAVE_PHOTO_SUCCESS = \"SET_PHOTO_SUCCESS\";\r\nconst ADD_HERO = \"ADD_HERO\";\r\n\r\n\r\nlet initialState = {\r\n    heroes: [],\r\n    pageSize: 5,\r\n    totalHeroesCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    currentHero: 1,\r\n    currentDoing: \"\"\r\n}\r\n\r\nconst heroesReducer = (state = initialState, action) => {\r\n    switch(action.type){\r\n        case SET_HEROES:{\r\n            return {...state, heroes: action.heroes}\r\n        }\r\n        case SET_TOTAL_HEROES_COUNT:{\r\n            return {...state, totalHeroesCount: action.totalHeroesCount}\r\n        }\r\n        case TOOGLE_IS_FETCHING: {\r\n            return {...state, isFetching: action.isFetching}\r\n        }\r\n        case TAKE_HERO:{\r\n            return {...state, currentHero: action.currentHero}\r\n        }\r\n        case SET_CURRENT_PAGE:{\r\n            return {...state, currentPage: action.currentPage}\r\n        }\r\n        case DELETE_HERO:{\r\n            return {\r\n                ...state,\r\n                heroes: state.heroes.map(h => {\r\n                    if(h.id === action.heroId){\r\n                        return h.id;\r\n                    }\r\n                })\r\n            }\r\n        }\r\n        case SET_CURRENT_DOING:{\r\n            return {...state, currentDoing: action.currentDoing}\r\n        }\r\n        case SAVE_PHOTO_SUCCESS:{\r\n            return {...state, heroes: action.heroes}\r\n        }\r\n        case ADD_HERO:{\r\n            return {...state, heroes: action.heroes}\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport const setHeroes = (heroes) => ({\r\n    type: SET_HEROES, heroes\r\n});\r\nexport const setCurrentPage = (currentPage) => ({\r\n    type: SET_CURRENT_PAGE, currentPage\r\n});\r\nexport const setTotalHeroesCount = (totalHeroesCount) => ({\r\n    type: SET_TOTAL_HEROES_COUNT, totalHeroesCount\r\n});\r\nexport const setIsFetching = (isFetching) => ({\r\n    type: TOOGLE_IS_FETCHING, isFetching\r\n});\r\nexport const setCurrentHero = (currentHero) => ({\r\n    type: TAKE_HERO, currentHero\r\n});\r\nexport const deleteHero = (heroId) => {\r\n    heroApi.deleteHero(heroId);\r\n}\r\nexport const savePhotoSucces = (heroes) =>({\r\n    type:SAVE_PHOTO_SUCCESS, heroes \r\n})\r\nexport const setCurrentDoing = (currentDoing) => ({\r\n    type: SET_CURRENT_DOING, currentDoing\r\n});\r\n\r\nexport const savePhoto = (file) => async (dispatch) =>{\r\n    let response = await heroApi.savePhoto(file);\r\n    dispatch(savePhotoSucces(response.heroes));\r\n}\r\n\r\nexport const addHeroSucces = (heroes) => ({\r\n    type: ADD_HERO, heroes\r\n});\r\n\r\nexport const addHeroes = (hero) =>{\r\n        heroApi.addHero(hero);\r\n}\r\n\r\nexport const getHeroesThunkCreator = (currentPage, pageSize) => {\r\n    return(dispatch) => {\r\n        dispatch(setIsFetching(true));\r\n\r\n        heroApi.getHeroes(currentPage, pageSize).then(data => {\r\n            dispatch(setIsFetching(false));\r\n            dispatch(setHeroes(data.heroes));\r\n            dispatch(setTotalHeroesCount(data.totalHeroesCount));\r\n            dispatch(setCurrentHero(data.heroes[1]));\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport default heroesReducer;"]},"metadata":{},"sourceType":"module"}